<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>用户排行榜</title>
</head>
<body>
<h1>排行榜</h1>
<table id="rank-table">
    <thead>
    <tr>
        <td>排名</td>
        <td>名字</td>
        <td>分数</td>
    </tr>
    </thead>
</table>
<script>
    const httpRequest = new XMLHttpRequest();//第一步：建立所需的对象
    httpRequest.open('GET', '/AsyncRank', true);//第二步：打开连接, 将请求参数写在url中
    httpRequest.send();//第三步：发送请求  将请求参数写在URL中
    /**
     * 获取数据后的处理程序
     */
    httpRequest.onreadystatechange = function () {
        if (httpRequest.readyState === 4 && httpRequest.status === 200) {
            const json = httpRequest.responseText;//获取到json字符串，还需解析
            console.log(json);
            const list = JSON.parse(json);
            document.getElementById('rank-table').innerHTML = '<tr> <td>排名</td><td>名字</td><td>分数</td> </tr>' +
                '<tr><td>1</td><td>' + list[0].user.name + '</td><td>' + list[0].score + '</td></tr>' +
                '<tr><td>2</td><td>' + list[1].user.name + '</td><td>' + list[1].score + '</td></tr>' +
                '<tr><td>3</td><td>' + list[2].user.name + '</td><td>' + list[2].score + '</td></tr>'
        }
    };
</script>
</body>
</html>